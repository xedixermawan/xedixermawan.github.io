<!doctype html>













































<html
  class="not-ready lg:text-base"
  style="--bg: #fbfbfb"
  lang="en"
  dir="ltr"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>Timer di AVR - Home</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="Timer dalam embendded system sangat banyak kegunaannya.Itulah karenanya setiap mikrokontroler terdapat fitur timer. Mikrokontroller AVR keluaran Atmel memiliki beberapa timer(ATmega16 dalam hal ini,tipe lain yang lebih tinggi sama ,kecuali penambahan jumlah timernya),diantaranya timer0(8 bit),timer1(16 bit),dan timer2(8 bit).
Timer0 dan timer2(8 bit).
timer ini menghitung maksimal 255 hitungan.dimana periode setiap hitungan(detaknya) tergantung dari setting prescaler-nya. Untuk mengatur timer mode operasi apa yang digunakan dan mengatur prescaler digunakan register TCCRx(x=0,2).TCCRx adalah register 8 bit sebagai berikut:" />
  <meta name="author" content="oth3rside" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://xedixermawan.github.io/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="https://xedixermawan.github.io/theme.png" />

  
  
  
  
  <link rel="preload" as="image" href="https://www.gravatar.com/avatar/874371989962b8461ad94e8119d82bc7?s=160&amp;d=identicon" />
  
  

  
  
  <link rel="preload" as="image" href="https://xedixermawan.github.io/twitter.svg" />
  
  <link rel="preload" as="image" href="https://xedixermawan.github.io/github.svg" />
  
  <link rel="preload" as="image" href="https://xedixermawan.github.io/instagram.svg" />
  
  

  
  
  <script
    defer
    src="https://xedixermawan.github.io/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  

  
  <link
    rel="icon"
    href="https://xedixermawan.github.io/favicon.ico"
  />
  <link
    rel="apple-touch-icon"
    href="https://xedixermawan.github.io/apple-touch-icon.png"
  />

  
  <meta name="generator" content="Hugo 0.136.5">

  
  
  
  
  
  
  <meta itemprop="name" content="Timer di AVR">
  <meta itemprop="description" content="Timer dalam embendded system sangat banyak kegunaannya.Itulah karenanya setiap mikrokontroler terdapat fitur timer. Mikrokontroller AVR keluaran Atmel memiliki beberapa timer(ATmega16 dalam hal ini,tipe lain yang lebih tinggi sama ,kecuali penambahan jumlah timernya),diantaranya timer0(8 bit),timer1(16 bit),dan timer2(8 bit).
Timer0 dan timer2(8 bit).
timer ini menghitung maksimal 255 hitungan.dimana periode setiap hitungan(detaknya) tergantung dari setting prescaler-nya. Untuk mengatur timer mode operasi apa yang digunakan dan mengatur prescaler digunakan register TCCRx(x=0,2).TCCRx adalah register 8 bit sebagai berikut:">
  <meta itemprop="datePublished" content="2007-09-28T01:52:00+00:00">
  <meta itemprop="dateModified" content="2007-09-28T01:52:00+00:00">
  <meta itemprop="wordCount" content="620">
  <meta itemprop="keywords" content="Elektronics Design">
  
  <meta property="og:url" content="https://xedixermawan.github.io/2007/09/28/timer-di-avr/">
  <meta property="og:site_name" content="Home">
  <meta property="og:title" content="Timer di AVR">
  <meta property="og:description" content="Timer dalam embendded system sangat banyak kegunaannya.Itulah karenanya setiap mikrokontroler terdapat fitur timer. Mikrokontroller AVR keluaran Atmel memiliki beberapa timer(ATmega16 dalam hal ini,tipe lain yang lebih tinggi sama ,kecuali penambahan jumlah timernya),diantaranya timer0(8 bit),timer1(16 bit),dan timer2(8 bit).
Timer0 dan timer2(8 bit).
timer ini menghitung maksimal 255 hitungan.dimana periode setiap hitungan(detaknya) tergantung dari setting prescaler-nya. Untuk mengatur timer mode operasi apa yang digunakan dan mengatur prescaler digunakan register TCCRx(x=0,2).TCCRx adalah register 8 bit sebagai berikut:">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2007-09-28T01:52:00+00:00">
    <meta property="article:modified_time" content="2007-09-28T01:52:00+00:00">

  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Timer di AVR">
  <meta name="twitter:description" content="Timer dalam embendded system sangat banyak kegunaannya.Itulah karenanya setiap mikrokontroler terdapat fitur timer. Mikrokontroller AVR keluaran Atmel memiliki beberapa timer(ATmega16 dalam hal ini,tipe lain yang lebih tinggi sama ,kecuali penambahan jumlah timernya),diantaranya timer0(8 bit),timer1(16 bit),dan timer2(8 bit).
Timer0 dan timer2(8 bit).
timer ini menghitung maksimal 255 hitungan.dimana periode setiap hitungan(detaknya) tergantung dari setting prescaler-nya. Untuk mengatur timer mode operasi apa yang digunakan dan mengatur prescaler digunakan register TCCRx(x=0,2).TCCRx adalah register 8 bit sebagai berikut:">

  
  

  
  <link rel="canonical" href="https://xedixermawan.github.io/2007/09/28/timer-di-avr/" />
  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-[--w] px-8 lg:justify-center">
  <div class="relative z-50 ltr:mr-auto rtl:ml-auto flex items-center">
    <a class="-translate-y-[1px] text-2xl font-medium" href="https://xedixermawan.github.io/"
      >Home</a
    >
    <div
      class="btn-dark text-[0] ltr:ml-4 rtl:mr-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 ltr:-mr-8 rtl:-ml-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#fbfbfb'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-10 rtl:space-x-reverse">
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/about/"
        >About</a
      >
      
      <a
        class="block text-center text-xl leading-[5rem] lg:text-base lg:font-normal"
        href="/contact/"
        >Contact</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 rtl:space-x-reverse dark:invert ltr:lg:ml-14 rtl:lg:mr-14 lg:mt-0 lg:items-center"
    >
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./twitter.svg)"
        href="https://twitter.com/XediXermawan"
        target="_blank"
        rel="me"
      >
        twitter
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/XediXermawan"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
      <a
        class="h-7 w-7 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./instagram.svg)"
        href="https://instagram.com/XediXermawan"
        target="_blank"
        rel="me"
      >
        instagram
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-[--w] px-8 pb-16 pt-14 dark:prose-invert"
    >
      

<article>
  <header class="mb-14">
    <h1 class="!my-0 pb-2.5">Timer di AVR</h1>

    
    <div class="text-xs antialiased opacity-60">
      
      <time>Sep 28, 2007</time>
      
      
      
      
      <span class="mx-1">&middot;</span>
      <span>oth3rside</span>
      
    </div>
    
  </header>

  <section><p>Timer dalam embendded system sangat banyak kegunaannya.Itulah karenanya setiap mikrokontroler terdapat fitur timer. Mikrokontroller AVR keluaran Atmel memiliki beberapa timer(ATmega16 dalam hal ini,tipe lain yang lebih tinggi sama ,kecuali penambahan jumlah timernya),diantaranya timer0(8 bit),timer1(16 bit),dan timer2(8 bit).</p>
<p>Timer0 dan timer2(8 bit).</p>
<p>timer ini menghitung maksimal 255 hitungan.dimana periode setiap hitungan(detaknya) tergantung dari setting prescaler-nya. Untuk mengatur timer mode operasi apa yang digunakan dan mengatur prescaler digunakan register TCCRx(x=0,2).TCCRx adalah register 8 bit sebagai berikut:</p>
<p>FOC0WGM00 COM01COM00 WGM01CS2 CS1 CS0</p>
<p>7 6543210</p>
<p>CS0,CS1,CS2 digunakan untuk pengaturan prescaller, misalnya</p>
<p>000: timer dihentikan jika diset nilai ini</p>
<p>001: sekali detaknya sama dengan detak oscillator crystal yang digunakan</p>
<p>010 : sekali detaknya sama dengan oscillator/8.misalnya oscilator 8 MHZ,makasekali detak 1 perlu 1 mikrodetik.atau pada hitungan maksimal 255 us.</p>
<p>(atau clock berdetak 8 kali,timer baru sekali)</p>
<p>ànilai cs0,1,2 lain dapat dilihat di datasheetnya.</p>
<p>WGM00 dan WGM 01 digunakan untuk mode operasi dari timer,</p>
<p>Mode-Mode kerja Timer</p>
<p>1.mode normal,timer digunakan untuk ngitung saja,membuat delay,menghitung selang waktu .</p>
<p>2.mode PWM,phase correct</p>
<p>3.CTC,dalam mode ini ,nilai timer yang ada pada TCNTx akan di nol-kan lagi jika TCTx sudah <em>match</em> dengan nilai yang ada pada register OCRx.sebelumnya OCR diset dulu,.karena timer0 dan 2maksimumnya 255,maka range OCR 0-255.</p>
<p>4.Fast PWM</p>
<p>COM00,01:tergantung mode apa yang digunakan(nilaiWGM),COM00,01 untuk pengaturan lebih spesifik suatu mode timer.</p>
<p>Jadi hal utama jika akan menggunakan tiemr adalah setting TCCRx-nya,digunakan untuk mode apa(secara default,adalah sebagai mode normal).dan ketika saat timer jalan,jumlah hitungannya dapat dilihat Di register TCNTx.</p>
<p>Jika menggunakan compiler Seperti CodeVision ,penggunaannya auto generated,namun walaupun begitu ketika troubleshoot program setting manual adalah penting.</p>
<p>Interrupt Timer</p>
<p>1.Overflow Interrupt,akan terjadi interrupt jika TCNTx mencapai 255 untuk timer0 dan timer2 ,dan 65535 untuk timer1.</p>
<p>2.Compare Match interrupt,terjadi jika nilai OCR sama dengan TCNTx</p>
<p>Contoh Aplikasi:</p>
<ol>
<li>Jam digital.</li>
</ol>
<p>Digunakan Compare Match Interrupt,menggunakan crystal 12 MHZ,digunakan timer 0</p>
<p>Dengan prescaller Osc/8: 12mhz/8=1,5 mhz periode 1/1,5mhz==sekitar 100 us,jadi agar setara 1 detik harus dikali 10000.</p>
<p>Register OCR=0x96.</p>
<p>Output :tampilan Jam:Menit:Detik pada port C yang terhubung dengan LCD 2x16</p>
<p>/*********************************************</p>
<p>Project : jam digital</p>
<p>Date : 7/13/2007</p>
<p>Author: edee</p>
<p>Chip type : ATmega16</p>
<p>Program type : Application</p>
<p>Clock frequency : 12.000000 MHz</p>
<p>Memory model : Small</p>
<p>External SRAM size : 0</p>
<p>Data Stack size : 256</p>
<p>*********************************************/</p>
<p>#include &lt;mega16.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>// Alphanumeric LCD Module functions</p>
<p>#asm</p>
<p>.equ __lcd_port=0x15</p>
<p>#endasm</p>
<p>#include &lt;lcd.h&gt;</p>
<p>unsigned int kdetik=0,detik=0,menit=0,jam=0;</p>
<p>unsigned char cdetik[10],cmenit[10],cjam[10];</p>
<p>// interrupt jika compare match</p>
<p>interrupt [TIM0_COMP] void timer0_comp_isr(void)</p>
<p>{</p>
<p>TCNT0=0; //jika sudah compare match,set awal lagi</p>
<p>if(++kdetik==10000)</p>
<p>{</p>
<p>if(++detik==60)</p>
<p>{ detik=0;</p>
<p>lcd_clear();</p>
<p>if(++menit==60)</p>
<p>{menit=0;</p>
<p>lcd_clear();</p>
<p>if(++jam==24)</p>
<p>{</p>
<p>jam=0;</p>
<p>lcd_clear();</p>
<p>}
}
}
kdetik=0;
itoa(detik,cdetik);
itoa(menit,cmenit);
itoa(jam,cjam);
lcd_gotoxy(9,0);
lcd_putsf(&quot;:&quot;);
lcd_gotoxy(10,0);
lcd_puts(cdetik);
lcd_gotoxy(6,0);
lcd_putsf(&quot;:&quot;);
lcd_gotoxy(7,0);
lcd_puts(cmenit);
lcd_gotoxy(4,0);
lcd_puts(cjam);
lcd_gotoxy(0,1);
lcd_putsf(&quot;= Jam Digital =&quot;);</p>
<p>}</p>
<p>}</p>
<p>void main(void)</p>
<p>{</p>
<p>//PA.5,6,7 input,dengan pull up</p>
<p>PORTA=0xE0;</p>
<p>DDRA=0x00;</p>
<p>PORTB=0x00;</p>
<p>DDRB=0x00;</p>
<p>PORTC=0x00;</p>
<p>DDRC=0x00;</p>
<p>PORTD=0x00;</p>
<p>DDRD=0x00;</p>
<p>//timer 0 sumber 12mhz/8=1,5 mhz periode 1/1,5mhz</p>
<p>TCCR0=0x02;</p>
<p>TCNT0=0x00;</p>
<p>OCR0=0x96; //sekitar 100us</p>
<p>TCCR1A=0x00;</p>
<p>TCCR1B=0x00;</p>
<p>TCNT1H=0x00;</p>
<p>TCNT1L=0x00;</p>
<p>OCR1AH=0x00;</p>
<p>OCR1AL=0x00;</p>
<p>OCR1BH=0x00;</p>
<p>OCR1BL=0x00;</p>
<p>// Timer/Counter 2 initialization</p>
<p>// Clock source: System Clock</p>
<p>// Clock value: Timer 2 Stopped</p>
<p>// Mode: Normal top=FFh</p>
<p>// OC2 output: Disconnected</p>
<p>ASSR=0x00;</p>
<p>TCCR2=0x00;</p>
<p>TCNT2=0x00;</p>
<p>OCR2=0x00;</p>
<p>// External Interrupt(s) initialization</p>
<p>// INT0: Off</p>
<p>// INT1: Off</p>
<p>// INT2: Off</p>
<p>MCUCR=0x00;</p>
<p>MCUCSR=0x00;</p>
<p>// interrupt timer digunakan</p>
<p>TIMSK=0x02;</p>
<p>// Analog Comparator initialization</p>
<p>// Analog Comparator: Off</p>
<p>// Analog Comparator Input Capture by Timer/Counter 1: Off</p>
<p>// Analog Comparator Output: Off</p>
<p>ACSR=0x80;</p>
<p>SFIOR=0x00;</p>
<p>lcd_init(16);</p>
<p>#asm(&ldquo;sei&rdquo;)</p>
<p>while (1)</p>
<p>{</p>
<p>};</p>
<p>}</p>
<p>2.Pengukur selang waktu</p>
<p>Dalam aplikasi ini timer digunakan untuk mengukur selang waktu dua kejadian,dimulai start dan stop(tanpa menggunakan interrupt apapun)</p>
<p>Deklarasi awal:</p>
<p>#define TSTART() TCCR1B = 0x02</p>
<p>//stop timer</p>
<p>#define TSTOP() TCCR1B = 0x00</p>
<p>#define TRESET() TCNT1=0x00</p>
<p>#define THABIS 65000</p>
<p>Penggunaan di program:</p>
<p>TSTART();</p>
<p>while(PINB.0!=1) //jika syarat stop terpenuhi</p>
<p>{</p>
<p>hitung++;</p>
<p>if(hitung==THABIS)//sampai nilai max</p>
<p>{ //j=0; // return 0;</p>
<p>break;</p>
<p>}</p>
<p>}</p>
<p>TSTOP();</p>
<p>t=TCNT1;</p>
<p>akhir2 ini sering pake timer.</p>
</section>

  
  

  
  
  
  
  <nav
    class="mt-24 flex overflow-hidden rounded-xl bg-black/[3%] text-lg !leading-[1.2] *:flex *:w-1/2 *:items-center *:p-5 *:font-medium *:no-underline dark:bg-white/[8%] [&>*:hover]:bg-black/[2%] dark:[&>*:hover]:bg-white/[3%]"
  >
    
    <a class="ltr:pr-3 rtl:pl-3" href="https://xedixermawan.github.io/2007/10/09/magang-ato-ndak-yach/"
      ><span class="ltr:mr-1.5 rtl:ml-1.5">←</span><span>Magang atau tidak</span></a
    >
    
    
    <a class="ltr:ml-auto rtl:mr-auto justify-end pl-3" href="https://xedixermawan.github.io/2007/08/31/avr-development-boardmemulai-avr-dengan-otodidak/"
      ><span>AVR development board, memulai AVR dengan otodidak</span><span class="ltr:ml-1.5 rtl:mr-1.5">→</span></a
    >
    
  </nav>
  
  

  
  

  
  

  


  
</article>


    </main>

    <footer
  class="mx-auto flex h-[4.5rem] max-w-[--w] items-center px-8 text-xs uppercase tracking-wider opacity-60"
>
  <div class="mr-auto">
  
    © 2007-2024 XediXermawan
  
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >powered by hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >hugo-paper</a
  >
</footer>

  </body>
</html>
